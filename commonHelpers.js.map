{"version":3,"file":"commonHelpers.js","sources":["../src/js/helper.js","../src/js/api.js","../src/js/handles.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showToast(type, header, message, position = 'topLeft') {\n  switch (type) {\n    case 'error':\n      iziToast.error({\n        title: header,\n        message,\n      });\n      break;\n    case 'success':\n      iziToast.success({\n        title: header,\n        message,\n        position,\n      });\n      break;\n    case 'info':\n      iziToast.warning({\n        title: header,\n        message,\n      });\n      break;\n  }\n}\n\nexport function checkNextPage(maximum, length) {\n  if (maximum <= length) {\n    showToast(\n      'info',\n      'Limit',\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    return false;\n  }\n  return true;\n}\n\nexport function displayImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const imgCards = images\n    .map(\n      image => `\n        <div class=\"image-card\">\n          <a href=\"${image.largeImageURL}\" class=\"gallery_link\">\n            <img class=\"image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"image-attributes\">\n              <div class=\"item\">\n                <p>Likes: </p>\n                <p> ${image.likes}</p>\n              </div>\n              <div class=\"item\">\n                <p>Views: </p>\n                <p> ${image.views}</p>\n              </div>\n              <div class=\"item\">\n                <p>Comments: </p>\n                <p> ${image.comments}</p>\n              </div>\n              <div class=\"item\">\n                <p>Downloads:</p>\n                <p> ${image.downloads}</p>\n              </div>\n            </div>\n          </a>\n        </div>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', imgCards);\n}\n","import axios from 'axios';\naxios.defaults.headers.common['x-api-key'] =\n  '44179146-9b08b79ddd3beefa939deb5d3';\naxios.defaults.headers = ['Access-Control-Allow-Origin'];\nconst API_KEY = '44179146-9b08b79ddd3beefa939deb5d3';\nconst baseURL = `https://pixabay.com/api/`;\n\nexport async function requestImages(searchQuery, img_on_page, page) {\n  try {\n    const response = await axios.get(baseURL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: img_on_page,\n        page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { checkNextPage, displayImages, showToast } from './helper';\nimport { requestImages } from './api';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchQuery = '';\nlet page = 1;\nlet canScroll = true;\nlet img_on_page = 40;\n\nexport async function handleSubmit(event, more, gallery) {\n  event.preventDefault();\n\n  more.style.display = 'none';\n  gallery.innerHTML = '';\n  page = 1;\n  searchQuery = event.target.elements[0].value.trim();\n  if (!searchQuery) {\n    showToast('error', 'Error', 'Please enter a search query');\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await requestImages(\n      searchQuery,\n      img_on_page,\n      page\n    );\n\n    if (hits.length === 0) {\n      showToast(\n        'info',\n        'No Results',\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      gallery.innerHTML = '';\n      return;\n    }\n    if (page === 1) {\n      showToast(\n        'success',\n        'Success',\n        `Hooray! We found ${totalHits} images.`,\n        'topCenter'\n      );\n    }\n\n    displayImages(hits);\n    more.style.display = 'block';\n    lightbox.refresh();\n    page++;\n    canScroll = checkNextPage(totalHits, gallery.children.length);\n    if (!canScroll) {\n      more.style.display = 'none';\n    }\n  } catch (error) {\n    showToast(\n      'error',\n      'Error',\n      'Something went wrong. Please try again later.'\n    );\n  }\n}\n\nexport async function handleMoreClick(event, more, gallery) {\n  try {\n    const { hits, totalHits } = await requestImages(\n      searchQuery,\n      img_on_page,\n      page\n    );\n    displayImages(hits);\n    more.style.display = 'block';\n    lightbox.refresh();\n    const { height: cardHeight } =\n      gallery.firstElementChild.getBoundingClientRect();\n    if (page > 1)\n      window.scrollBy({\n        top: cardHeight * 3,\n        behavior: 'smooth',\n      });\n    page++;\n    canScroll = checkNextPage(totalHits, gallery.children.length);\n    if (!canScroll) {\n      more.style.display = 'none';\n    }\n  } catch (error) {\n    showToast(\n      'error',\n      'Error',\n      'Something went wrong. Please try again later.'\n    );\n  }\n}\n","import { handleMoreClick, handleSubmit } from './js/handles';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const more = document.querySelector('.load-more');\n  const form = document.getElementById('search-form');\n  const gallery = document.querySelector('.gallery');\n\n  form.addEventListener('submit', event => handleSubmit(event, more, gallery));\n  more.addEventListener('click', event =>\n    handleMoreClick(event, more, gallery)\n  );\n});\n"],"names":["showToast","type","header","message","position","iziToast","checkNextPage","maximum","length","displayImages","images","gallery","imgCards","image","axios","API_KEY","baseURL","requestImages","searchQuery","img_on_page","page","error","lightbox","SimpleLightbox","canScroll","handleSubmit","event","more","hits","totalHits","handleMoreClick","cardHeight","form"],"mappings":"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"}