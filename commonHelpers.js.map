{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/helper.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.headers.common['x-api-key'] =\n  '44179146-9b08b79ddd3beefa939deb5d3';\naxios.defaults.headers = ['Access-Control-Allow-Origin'];\nconst API_KEY = '44179146-9b08b79ddd3beefa939deb5d3';\nconst baseURL = `https://pixabay.com/api/`;\n\nexport async function requestImages(searchQuery, img_on_page, page) {\n  try {\n    const response = await axios.get(baseURL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: img_on_page,\n        page,\n      },\n    });\n\n    return response;\n  } catch (error) {\n    return error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showToast(type, header, message, position = 'topLeft') {\n  switch (type) {\n    case 'error':\n      iziToast.error({\n        title: header,\n        message,\n      });\n      break;\n    case 'success':\n      iziToast.success({\n        title: header,\n        message,\n        position,\n      });\n      break;\n    case 'info':\n      iziToast.warning({\n        title: header,\n        message,\n      });\n      break;\n  }\n}\n\nexport function checkNextPage(maximum, length, count) {\n  if (maximum < length + count) {\n    showToast(\n      'info',\n      'Limit',\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    return false;\n  }\n  return true;\n}\n\nexport function displayImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const imgCards = images\n    .map(\n      image => `\n        <div class=\"image-card\">\n          <a href=\"${image.largeImageURL}\" class=\"gallery_link\">\n            <img class=\"image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"image-attributes\">\n              <div class=\"item\">\n                <p>Likes: </p>\n                <p> ${image.likes}</p>\n              </div>\n              <div class=\"item\">\n                <p>Views: </p>\n                <p> ${image.views}</p>\n              </div>\n              <div class=\"item\">\n                <p>Comments: </p>\n                <p> ${image.comments}</p>\n              </div>\n              <div class=\"item\">\n                <p>Downloads:</p>\n                <p> ${image.downloads}</p>\n              </div>\n            </div>\n          </a>\n        </div>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', imgCards);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { requestImages } from './js/api';\nimport { checkNextPage, displayImages, showToast } from './js/helper';\n\nlet page = 1;\nlet searchQuery = '';\nlet img_on_page = 40;\nlet canScroll = true;\nlet maximum;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const more = document.querySelector('.load-more');\n  const form = document.getElementById('search-form');\n  const gallery = document.querySelector('.gallery');\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n    more.style.display = 'none';\n    gallery.innerHTML = '';\n    page = 1;\n    searchQuery = event.target.searchQuery.value.trim();\n    if (!searchQuery) {\n      showToast('error', 'Error', 'Please enter a search query');\n      return;\n    }\n    await requestImages(searchQuery, img_on_page, page)\n      .then(response => {\n        const images = response.data?.hits;\n        maximum = response.data.totalHits;\n\n        if (images.length === 0) {\n          showToast(\n            'info',\n            'No Results',\n            'Sorry, there are no images matching your search query. Please try again.'\n          );\n          gallery.innerHTML = '';\n          return;\n        }\n        if (page === 1) {\n          showToast(\n            'success',\n            'Success',\n            `Hooray! We found ${response.data.totalHits} images.`,\n            'topCenter'\n          );\n        }\n\n        displayImages(images);\n        more.style.display = 'block';\n        lightbox.refresh();\n        page++;\n        canScroll = checkNextPage(\n          response.data.totalHits,\n          gallery.children.length,\n          img_on_page\n        );\n        if (!canScroll) {\n          more.style.display = 'none';\n        }\n      })\n      .catch(error => {\n        showToast(\n          'error',\n          'Error',\n          'Something went wrong. Please try again later.'\n        );\n      });\n  });\n\n  more.addEventListener('click', () => {\n    requestImages(searchQuery, img_on_page, page).then(response => {\n      const images = response.data.hits;\n      displayImages(images);\n      more.style.display = 'block';\n      lightbox.refresh();\n      const { height: cardHeight } =\n        gallery.firstElementChild.getBoundingClientRect();\n      if (page > 1)\n        window.scrollBy({\n          top: cardHeight * 3,\n          behavior: 'smooth',\n        });\n      page++;\n      canScroll = checkNextPage(\n        response.data.totalHits,\n        gallery.children.length,\n        img_on_page\n      );\n      if (!canScroll) {\n        more.style.display = 'none';\n      }\n    });\n  });\n\n  // infinite scrool\n\n  // const scroll_listener = window.addEventListener('scroll', () => {\n  //   if (!canScroll) {\n  //     window.removeEventListener(scroll_listener);\n  //   }\n  //   if (\n  //     window.innerHeight + window.scrollY >= document.body.offsetHeight - 50 &&\n  //     searchQuery.length > 0 &&\n  //     checkNextPage(maximum) &&\n  //     maximum >= page * img_on_page\n  //   ) {\n  //     requestImages();\n  //     console.log(page);\n  //   }\n  // });\n});\n"],"names":["axios","API_KEY","baseURL","requestImages","searchQuery","img_on_page","page","error","showToast","type","header","message","position","iziToast","checkNextPage","maximum","length","count","displayImages","images","gallery","imgCards","image","canScroll","more","form","lightbox","SimpleLightbox","event","response","_a","cardHeight"],"mappings":"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"}